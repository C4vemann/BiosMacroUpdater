<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="mystyle.css">
	</head>

	<body>
		<input type="text" id="input">

		<div id="temp">
			<p>Order #: <span id="order_number"></span></p>
			<p>Item #: <span id="item_number"></span></p>
			<p>Serial #: <span id="serial_number"></span></p>
			<p>Asset #: <span id="asset_number"></span></p>
		</div>


		<div id="output"></div>

		<script src="./OrderFormComponents/OrderForm.js"></script>
		<script src="./OrderFormComponents/OrderFormId.js"></script>
		<script src="./OrderFormComponents/OrderNumber.js"></script>
		<script src="./OrderFormComponents/ItemNumber.js"></script>
		<script src="./OrderFormComponents/SerialNumber.js"></script>
		<script src="./OrderFormComponents/AssetNumber.js"></script>
		<script>


			function sevenSequentialNumbersMatcher(str){
				if(str.length > 7 || str.length < 7){
					return false;
				} else {
					let pattern = /[0-9]{7}$/;
					return pattern.test(str);
				}
			}

			function secondMatch(str){
				if(str.length > 7 || str.length < 7){
					return false;
				} else {
					let pattern = /((([0-9]||[A-Z])*[0-9]([0-9]||[A-Z])*[A-Z]([0-9]||[A-Z])*)||(([0-9]||[A-Z])*[A-Z]([0-9]||[A-Z])*[0-9]([0-9]||[A-Z])*))$/;
					return pattern.test(str);
				}
			}
			function thirdMatch(str){
				if(str.length > 10 || str.length < 10){
					return false;
				} else {
					let pattern = /ITE000[0-9]{4}$/;
					return pattern.test(str);
				}
			}




			let input = document.getElementById("input");
			input.addEventListener("change", func1, false);



			let output = document.getElementById("output");
			let orderList = new Array();


			let idTemp = null;
			let itemTemp = null;
			let serialTemp = null;
			let assetTemp = null;


			let orderNumber = document.getElementById("order_number");
			let itemNumber = document.getElementById("item_number");
			let serialNumber = document.getElementById("serial_number");
			let assetNumber = document.getElementById("asset_number");


			function func1(){
				if(sevenSequentialNumbersMatcher(this.value)){

					if(idTemp != null && serialTemp != null && assetTemp != null){
						
						orderList.push(new OrderForm(idTemp,"", serialTemp, assetTemp));
						output.appendChild(orderList[orderList.length - 1].element);

						idTemp = null;
						serialTemp = null;
						assetTemp = null;
					}


					orderNumber.innerText = "";
					serialNumber.innerText = "";
					assetNumber.innerText = "";

					idTemp = this.value;
					orderNumber.innerText = this.value;

				} else if(sevenSequentialNumbersMatcher(this.value) && idTemp != null){
					console.log(this.value);
				} 

				else if(secondMatch(this.value) && idTemp != null && serialTemp == null){
					serialTemp = this.value;
					serialNumber.innerText = this.value;
				} else if(thirdMatch(this.value) && idTemp != null && serialTemp != null && assetTemp == null){
					assetTemp = this.value;
					assetNumber.innerText = this.value;
				} else {
				}

				this.value = "";
			}



		</script>
	</body>
</html>