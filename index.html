<!DOCTYPE html>
<html>
	<head>
		<style>
			.option{
				border:2px solid black;
				max-width: 400px;
				cursor: ponter;
			}
			.option:hover{
				background: lightgrey;
			}
			#optionList{
				width: calc(50% - 4px);
				float: left;
			}
			#optionOutput{
				border: 2px solid black;
				max-height: fit-content;
				height: 400px;
				width: calc(50% - 4px);
				float: left;
			}
		</style>
	</head>
	<body>
		<div id="optionList">
		</div>
		<div id="optionOutput">
			<div id="innerSelectedOption">
			</div>
		</div>
		<script>
			const optionList = document.getElementById("optionList");
			const optionOutput = document.getElementById("optionOutput");
			let currentSelectedOptionId;

			const options = [
				{
					optionId:0,
					optionName:"Z4",
					optionFileName:"Z4.mac",
				},
				{
					optionId:1,
					optionName:"600 G6",
					optionFileName:"600 G6.mac",
				},
				{
					optionId:2,
					optionName:"5090pro",
					optionFileName:"5090pro.mac",
				},
				{
					optionId:3,
					optionName:"7X50",
					optionFileName:"7X50.mac",
				},
				{
					optionId:4,
					optionName:"7X60",
					optionFileName:"7X60.mac",
				},
				{
					optionId:5,
					optionName:"5410",
					optionFileName:"5410.mac",
				},
				{
					optionId:6,
					optionName:"5420",
					optionFileName:"5420.mac",
				},
				{
					optionId:7,
					optionName:"5820",
					optionFileName:"5820.mac",
				},
				{
					optionId:8,
					optionName:"7220 Rugged",
					optionFileName:"7220 Rugged.mac",
				},
				{
					optionId:9,
					optionName:"7320 Det",
					optionFileName:"7320 Det.mac",
				},
				{
					optionId:10,
					optionName:"7424 Rugged",
					optionFileName:"7424 Rugged.mac",
				}
			];

			function textToSaveToFile(name, version){
				let text = 
`<HAScript name="` + name + `" description="" timeout="60000" pausetime="300" promptall="true" blockinput="true" author="nyconfig" creationdate="Apr 6, 2022 1:00:53 PM" supressclearevents="false" usevars="false" ignorepauseforenhancedtn="true" delayifnotenhancedtn="0" ignorepausetimeforenhancedtn="true" continueontimeout="false">
	<screen name="Screen1" entryscreen="true" exitscreen="false" transient="false">
		<description>
			<oia status="NOTINHIBITED" optional="false" invertmatch="false" />
		</description>
		<actions>
			<input value="[pf6]" row="0" col="0" movecursor="true" xlatehostkeys="true" encrypted="false" />
		</actions>
		<nextscreens timeout="0" >
			<nextscreen name="Screen2" />
		</nextscreens>
	</screen>
	
	<screen name="Screen2" entryscreen="false" exitscreen="false" transient="false">
		<description>
			<oia status="NOTINHIBITED" optional="false" invertmatch="false" />
			<numfields number="70" optional="true" invertmatch="false" />
			<numinputfields number="4" optional="true" invertmatch="false" />
		</description>
		<actions>
			<input value="[pf7]" row="0" col="0" movecursor="true" xlatehostkeys="true" encrypted="false" />
		</actions>
		<nextscreens timeout="0" >
			<nextscreen name="Screen3" />
		</nextscreens>
	</screen>

	<screen name="Screen3" entryscreen="false" exitscreen="true" transient="false">
		<description>
			<oia status="NOTINHIBITED" optional="false" invertmatch="false" />
			<numfields number="43" optional="true" invertmatch="false" />
			<numinputfields number="3" optional="true" invertmatch="false" />
		</description>
		<actions>
			<input value="` + version + `[enter]" row="0" col="0" movecursor="true" xlatehostkeys="true" encrypted="false" />
		</actions>
		<nextscreens timeout="0" >
		</nextscreens>
	</screen>
</HAScript>`;
		
				return text;
			}
			
			function changeBiosVersion(){
				options[currentSelectedOptionId].optionBiosVersion = document.getElementById("newBiosVersionInput").value;
				let text = textToSaveToFile(options[currentSelectedOptionId].optionName,options[currentSelectedOptionId].optionBiosVersion);

				let dl = document.createElement("a");
				dl.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(text));
				dl.setAttribute("download", options[currentSelectedOptionId].optionFileName);
				dl.click();

			}

			function getBiosStuff(){
				let el = document.createElement("input");
				el.setAttribute("id", "newBiosVersionInput");
				el.setAttribute("type", "text");
				this.parentNode.appendChild(el);

				el = document.createElement("button");
				el.setAttribute("id", "biosChangeButton");
				el.innerText = "Change";
				el.addEventListener("click", changeBiosVersion,false);
				this.parentNode.appendChild(el);
			}

			function selectedOption(){
				currentSelectedOptionId = this.id;
				let el = document.createElement("div");
				el.setAttribute("id", "innerSelectedOption");
				el.setAttribute("class", "selectedOption");

				let textEl = document.createElement("h1");
				let text = document.createTextNode("Name: " + options[this.id].optionName);
				textEl.appendChild(text);
				el.appendChild(textEl);
				
				textEl = document.createElement("h1");
				text = document.createTextNode("File Location: " + options[this.id].optionFileName);
				textEl.appendChild(text);
				el.appendChild(textEl);

				let changeBiosButton = document.createElement("button");
				changeBiosButton.setAttribute("id", "changeBios");
				changeBiosButton.innerText = "Change Bios Version";
				changeBiosButton.addEventListener("click", getBiosStuff, false);

				el.appendChild(changeBiosButton);

				optionOutput.replaceChild(el, optionOutput.firstChild);
			}

			for(let option of options){
				let el = document.createElement("div");
				el.setAttribute("id", option.optionId);
				el.setAttribute("class", "option");

				el.addEventListener("click",selectedOption,false);

				let textEl = document.createElement("h1");
				let text = document.createTextNode(option.optionName);
				textEl.appendChild(text);
				el.appendChild(textEl);

				optionList.appendChild(el);
			}

		</script>
	</body>
</html>